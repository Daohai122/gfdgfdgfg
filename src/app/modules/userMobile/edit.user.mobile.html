<div class="m-content">
  <div class="row">
    <div class="col-md-12">
      <form validation-form submit-function="updateUser()" class="m-form m-form--fit m-form--label-align-right">
        <div class="col-md-12" style="padding:0px">
          <div class="m-portlet m-portlet--tab">
            <div class="m-portlet__body row">
              <div class="col-md-6 no-padding">
                <div class="form-group m-form__group" style="padding-top:10px">
                  <div class=" row">
                    <label class="col-4 col-form-label">{{'Họ tên' | translate }}<span class="required"> *</span></label>
                    <div class="col-8">
                      <input type="text"  ng-disabled="dataUser.isVerify && dataUser.type !=3" ng-model="dataUser.name" maxlength="200" class="form-control m-input"
                        placeholder="Nhập họ tên" required>
                    </div>
                  </div>
                </div>
                <div class="form-group m-form__group">
                  <div class="row">
                    <label class="col-4 col-form-label">{{'Số điện thoại' | translate }} <span class="required"> *</span></label>
                    <div class="col-8">
                      <input type="text" minlength="10" phone name="phone" maxlength="50" ng-model="dataUser.phone"
                        maxlength="12" class="form-control m-input" placeholder="Nhập số điện thoại" required>
                    </div>
                  </div>
                </div>
                <div class="form-group m-form__group">
                  <div class=" row">
                    <label  class="col-4 col-form-label ">{{'Ngày sinh' | translate }}:</label>
                    <div class="col-8">
                      <input ng-disabled="dataUser.isVerify && dataUser.type !=3" type="text" autocomplete="off" date-picker ng-model="dataUser.birthday" maxlength="255"
                        class="form-control m-input" placeholder="Chọn ngày sinh">
                    </div>
                  </div>
                </div>
                <div class="form-group m-form__group">
                  <div class="row">
                    <label   class="col-4 col-form-label">{{'Loại' | translate }} <span class="required"> *</span></label>
                    <div class="col-8">
                      <select ng-disabled="dataUser.isVerify && dataUser.type !=3 " class="form-control"si-selectpicker ng-model="dataUser.type" required>
                        <option value="">chọn</option>
                        <option value="2">Cựu học viên</option>
                        <option value="3">Khách</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="form-group m-form__group">
                  <div class=" row">
                    <label class="col-4 col-form-label">Địa chỉ:</label>
                    <div class="col-8">
                      <input type="text" ng-disabled="dataUser.isVerify && dataUser.type !=3" maxlength="200" ng-model="dataUser.address" class="form-control m-input"
                        placeholder="Nhập địa chỉ">
                    </div>
                  </div>
                </div>
                <div class="form-group m-form__group">
                  <div class=" row">
                    <label class="col-4 col-form-label">Giới tính:</label>
                    <div class="m-radio-inline col-8"  style="padding-left: 15px; padding-right: 15px">
                      <label class="m-radio">
                        <input type="radio" ng-disabled="dataUser.isVerify && dataUser.type !=3" ng-model="dataUser.gender" name="example_3" ng-value="true"> Nam
                        <span></span>
                      </label>
                      <label class="m-radio">
                        <input type="radio"  ng-disabled="dataUser.isVerify && dataUser.type !=3" ng-model="dataUser.gender" name="example_3" ng-value="false"> Nữ
                        <span></span>
                      </label>
                    </div>
                  </div>
                </div>
                <div ng-if="dataUser.type != 3">
                  <div class="form-group m-form__group">
                    <div class=" row">
                      <label class="col-4 col-form-label">{{'Trung Tâm' | translate }}<span class="required"> *</span></label>
                      <div class="col-8">
                        <select ng-disabled="dataUser.isVerify && dataUser.type !=3" class="form-control" si-selectpicker  ng-change="centerChange()" id='select-3' required update="center" 
                            ng-model="dataUser.centerCode">
                            <option value="">Chọn trung tâm</option>
                            <option  ng-disabled="dataUser.isVerify && dataUser.type !=3" ng-repeat="item in center" value="{{item.code}}">{{item.name}}</option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="form-group m-form__group">
                    <div class=" row">
                      <label class="col-4 col-form-label">{{'Khóa học' | translate }}<span class="required"> *</span></label>
                      <div class="col-8">
                        <select  ng-disabled="dataUser.isVerify && dataUser.type !=3" class="form-control" ng-change="batchChange()" id="select-1" si-selectpicker title="Chọn khóa"  update="batch"
                          ng-model="dataUser.batch_Id" required>
                          <option value="">Chọn khóa học</option>
                          <option ng-repeat="item in batch" value="{{item.id}}">{{item.name}}</option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="form-group m-form__group" style="padding-bottom: 10px">
                    <div class=" row">
                      <label class="col-4 col-form-label">{{'Lớp học' | translate }}<span class="required"> *</span></label>
                      <div class="col-8">
                        <select  ng-disabled="dataUser.isVerify && dataUser.type !=3" class="form-control" ng-model="dataUser.class_Id" ng-change="changeClass()" si-selectpicker title="Chọn lớp"  update="class" required >
                          <option value="">Chọn lớp học</option>
                          <option ng-repeat="item in class" value="{{item.id}}">{{item.name}}</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="form-group m-form__group">
                  <div class=" row">
                    <label class="col-4 col-form-label">{{'Hình ảnh' | translate }}:</label>
                    <div class="col-8">
                      <div class="m-dropzone dropzone dz-clickable" id="m-dropzone">
                        <div style="position: absolute;">
                          <button  type="button" id="upload_img" class="btn btn-secondary" >{{'Thêm mới' | translate}}</button>
                      </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6 no-padding">
                <div class="m-portlet__body" ng-show="dataUser.type != 3">
                  <div ng-hide="dataUser.isVerify && dataUser.type !=3" class="m-accordion m-accordion--bordered" role="tablist" style="padding-bottom:20px">
                    <div class="m-accordion__item" style=" overflow: visible;">
                      <div class="m-accordion__item-head" role="tab" id="m_accordion_6_item_2_head">
                        <span class="m-accordion__item-title ">Danh sách sinh viên khớp với tài khoản</span>
                      </div>
                      <div class="m-accordion__item-body collapse show"> 
                        <div  class="m-accordion__item-content no-padding">
                          <div class="m-portlet__body">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="form-group">
                                  <div class="input-group m-input-group">
                                    <div class="input-group-prepend"><span class="input-group-text">{{'Trung tâm' | translate}}</span></div>
                                    <select class="form-control" si-selectpicker title="Chọn trung tâm"  ng-change="centerChangefilter()" update="centerfilter" 
                                      ng-model="filter.centerCode">
                                      <option value="">Tất cả</option>
                                      <option ng-repeat="item in centerfilter" value="{{item.code}}">{{item.name}}</option>
                                  </select>
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="form-group">
                                  <div class="input-group m-input-group">
                                    <div class="input-group-prepend"><span class="input-group-text">{{'Khóa' | translate}}</span></div>
                                    <select class="form-control" ng-change="batchChangefilter()" si-selectpicker title="Chọn khóa" update="batchfilter" ng-model="filter.batch_Id">
                                        <option value="">tất cả</option>
                                        <option ng-repeat="item in batchfilter" value="{{item.id}}">{{item.name}}</option>
                                    </select>
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="form-group">
                                  <div class="input-group m-input-group">
                                    <div class="input-group-prepend"><span class="input-group-text">{{'Lớp' | translate}}</span></div>
                                    <select class="form-control" ng-model="filter.class_Id" si-selectpicker title="Chọn lớp" update="classfilter">
                                        <option value="">Tất cả</option>
                                        <option ng-repeat="item in classfilter" value="{{item.id}}">{{item.name}}</option>
                                    </select>
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="form-group">
                                  <div class="input-group m-input-group">
                                    <div class="input-group-prepend"><span class="input-group-text">{{'Tên Sinh viên' | translate}}</span></div>
                                    <input type="text" class="form-control" ng-click="getUserVerify()" 
                                    ng-keydown="$event.keyCode === 13 && getUserVerify()" ng-model="filter.SearchString">
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-3">
                                <div class="btn btn-info" ng-click="getUserVerify()">{{'Tìm kiếm' | translate }}</div>
                              </div>
                            </div>
                            
                            <table  class="table table-striped table-bordered table-hover table-checkable dataTable no-footer ng-scope" role="grid">
                              <thead>
                                <tr role="row">
                                  <th style="width: 15%" class="ng-binding">Tên sinh viên</th>
                                  <th style="width: 15%" class="ng-binding">Số điện thoại</th>
                                  <th style="width: 15%" class="ng-binding">Ngày sinh</th>
                                  <th style="width: 25%" class="ng-binding">Mã sinh viên</th>
                                  <th style="width: 15%" class="ng-binding">Hành động</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr data-toggle="m-tooltip" title="" data-original-title="{{data.address}} {{data.district}} {{data.province}}" ng-repeat="data in dataUserVerify" >
                                  <td><a href='/admin/student/detail/{{data.id}}/info' target="_blank" class="m-link m-link--brand m-font-bolder">{{data.last_name}} {{data.middle_name}} {{data.first_name}}</a></td>
                                  <td>{{data.phones[0]}}</td>
                                  <td>{{data.birthday | date : "dd/MM/yyyy"}}</td>
                                  <td>{{data.code}}</td>
                                  <td>
                                    <div ng-if="!selectedStudent && !data.user_id" class="btn btn-sm btn-success" ng-click="selectStudent(data)"> Chọn</div>
                                    <div ng-if="selectedStudent == data.id && !data.user_id" class="btn btn-sm btn-warning " ng-click="unSelectStudent()"> Bỏ chọn</div>
                                    <button ng-if="data.user_id" class="btn btn-sm btn-accent" disabled>Đã xác thực</button>
                                  </td>
                                </tr>
                              </tbody>
                            </table><!-- end ngIf: dataClass -->
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="m-portlet__body" ng-show="dataUser.type != 3 && dataUser.isVerify && dataUser.type !=3 && userVerify.length>0">
                  <div class="m-accordion m-accordion--bordered" role="tablist" style="padding-bottom:20px">
                    <div class="m-accordion__item">
                      <div class="m-accordion__item-head" role="tab" id="m_accordion_6_item_2_head">
                        <span class="m-accordion__item-title ">Sinh viên đã đã được xác thực</span>
                      </div>
                      <div class="m-accordion__item-body collapse show"> 
                        <div  class="m-accordion__item-content no-padding">
                          <div class="m-portlet__body">
                            <table class="table table-striped table-bordered table-hover table-checkable dataTable no-footer ng-scope" role="grid">
                              <thead>
                                <tr role="row">
                                  <th style="width: 15%" class="ng-binding">Tên sinh viên</th>
                                  <th style="width: 15%" class="ng-binding">Số điện thoại</th>
                                  <th style="width: 20%" class="ng-binding">Ngày sinh</th>
                                  <th style="width: 20%" class="ng-binding">Địa chỉ</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr ng-repeat="data in userVerify">
                                  <td><a href='/admin/student/detail/{{data.id}}/info' target="_blank" class="m-link m-link--brand m-font-bolder">{{data.last_name}} {{data.middle_name}} {{data.first_name}}</a></td>
                                  <td>{{data.phones[0]}}</td>
                                  <td>{{data.birthday | date : "dd/MM/yyyy"}}</td>
                                  <td>{{data.address}}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                   </div>       
                </div>
              </div>
            </div>
            <div class="m-portlet__foot m-portlet__foot--fit m-portlet__no-border">
              <div class="m-form__actions m-form__actions">
                <div class="row">
                  <div class="col-lg-12 button-center">
                    <button type="reset" class="btn btn-secondary" ng-click="goToList()">{{'Quay lại' | translate }}</button>
                    <button type="button" ng-if="dataUser.isVerify && dataUser.type !=3 && dataUser.type != 3" ng-click="unVerifyUser()" class="btn btn-warning">{{'Bỏ xác nhận tài khoản' | translate }}</button>
                    <button type="button" ng-if="!dataUser.isVerify && dataUser.type !=3 && dataUser.type != 3" ng-click="verifyUser()" class="btn btn-warning" >{{'Xác nhận tài khoản' | translate }}</button>
                    <button type="button" button-submit class="btn btn-accent">{{'Lưu' | translate }}</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div ng-show="dataUser.type != 3" class="m-accordion m-accordion--bordered" role="tablist" style="padding-bottom:20px">
                <div class="m-accordion__item">
                  <div class="m-accordion__item-head" role="tab" id="m_accordion_6_item_2_head" data-toggle="collapse" href="#m_accordion_6_item_2_body" aria-expanded="true">
                    <span class="m-accordion__item-title ">Danh sách công việc</span>
                    <span class="m-accordion__item-mode"></span>     
                  </div>
                  <div class="m-accordion__item-body collapse show" id="m_accordion_6_item_2_body" role="tabpanel" aria-labelledby="m_accordion_6_item_2_head" data-parent="#m_accordion_6" style=""> 
                    <div ng-if="job.length > 0" class="m-accordion__item-content no-padding">
                      <div class="m-portlet__body">
                        <table class="table table-striped table-bordered table-hover table-checkable dataTable no-footer ng-scope" role="grid">
                          <thead>
                            <tr role="row">
                              <th style="width: 15%" class="ng-binding">Công việc</th>
                              <th style="width: 15%" class="ng-binding">Chức vụ</th>
                              <th style="width: 20%" class="ng-binding">Công ty</th>
                              <th style="width: 20%" class="ng-binding">Địa chỉ</th>
                              <th style="width: 15%" class="ng-binding">Lương</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-repeat="data in job"> 
                              <td>{{data.name}}</td>
                              <td>{{data.title}}</td>
                              <td>{{data.company}}</td>
                              <td>{{data.address}}</td>
                              <td>{{data.salary | currency:'':0}} vnđ</td>
                            </tr>
                          </tbody>
                        </table><!-- end ngIf: dataClass -->
                      </div>
                    </div>
                    <div ng-if="job.length < 1" class="m-accordion__item-content no-padding">
                        <div class="m-portlet__body">
                            <h5>Sinh viên chưa có công việc nào </h5>
                        </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
</div>
