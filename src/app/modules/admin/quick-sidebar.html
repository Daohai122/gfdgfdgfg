<div id="m_quick_sidebar" class="m-quick-sidebar m-quick-sidebar--tabbed m-quick-sidebar--skin-light">
  <div class="m-quick-sidebar__content m--hide">
    <span id="m_quick_sidebar_close" class="m-quick-sidebar__close"><i class="la la-close"></i></span>
    <ul id="m_quick_sidebar_tabs" class="nav nav-tabs m-tabs m-tabs-line m-tabs-line--brand" role="tablist">
      <li class="nav-item m-tabs__item">
        <a class="nav-link m-tabs__link active" data-toggle="tab" href="#m_quick_sidebar_tabs_settings" role="tab">Notifiation</a>
      </li>
    </ul>
    <div class="tab-content">
      <div class="tab-pane active" id="m_quick_sidebar_tabs_settings" role="tabpanel">
        <div class="m-list-settings m-scrollable">
          <div class="m-list-settings__group">
            <div class="m-list-settings__heading">General Settings</div>
            <div class="m-list-settings__item">
              <span class="m-list-settings__item-label">Email Notifications</span>
              <span class="m-list-settings__item-control">
                <span class="m-switch m-switch--outline m-switch--icon-check m-switch--brand">
                  <label>
                    <input type="checkbox" checked="checked" name="">
                    <span></span>
                  </label>
                </span>
              </span>
            </div>
            <div class="m-list-settings__item">
              <span class="m-list-settings__item-label">Site Tracking</span>
              <span class="m-list-settings__item-control">
                <span class="m-switch m-switch--outline m-switch--icon-check m-switch--brand">
                  <label>
                    <input type="checkbox" name="">
                    <span></span>
                  </label>
                </span>
              </span>
            </div>
            <div class="m-list-settings__item">
              <span class="m-list-settings__item-label">SMS Alerts</span>
              <span class="m-list-settings__item-control">
                <span class="m-switch m-switch--outline m-switch--icon-check m-switch--brand">
                  <label>
                    <input type="checkbox" name="">
                    <span></span>
                  </label>
                </span>
              </span>
            </div>
            <div class="m-list-settings__item">
              <span class="m-list-settings__item-label">Backup Storage</span>
              <span class="m-list-settings__item-control">
                <span class="m-switch m-switch--outline m-switch--icon-check m-switch--brand">
                  <label>
                    <input type="checkbox" name="">
                    <span></span>
                  </label>
                </span>
              </span>
            </div>
            <div class="m-list-settings__item">
              <span class="m-list-settings__item-label">Audit Logs</span>
              <span class="m-list-settings__item-control">
                <span class="m-switch m-switch--outline m-switch--icon-check m-switch--brand">
                  <label>
                    <input type="checkbox" checked="checked" name="">
                    <span></span>
                  </label>
                </span>
              </span>
            </div>
          </div>
          <div class="m-list-settings__group">
            <div class="m-list-settings__heading">System Settings</div>
            <div class="m-list-settings__item">
              <span class="m-list-settings__item-label">System Logs</span>
              <span class="m-list-settings__item-control">
                <span class="m-switch m-switch--outline m-switch--icon-check m-switch--brand">
                  <label>
                    <input type="checkbox" name="">
                    <span></span>
                  </label>
                </span>
              </span>
            </div>
            <div class="m-list-settings__item">
              <span class="m-list-settings__item-label">Error Reporting</span>
              <span class="m-list-settings__item-control">
                <span class="m-switch m-switch--outline m-switch--icon-check m-switch--brand">
                  <label>
                    <input type="checkbox" name="">
                    <span></span>
                  </label>
                </span>
              </span>
            </div>
            <div class="m-list-settings__item">
              <span class="m-list-settings__item-label">Applications Logs</span>
              <span class="m-list-settings__item-control">
                <span class="m-switch m-switch--outline m-switch--icon-check m-switch--brand">
                  <label>
                    <input type="checkbox" name="">
                    <span></span>
                  </label>
                </span>
              </span>
            </div>
            <div class="m-list-settings__item">
              <span class="m-list-settings__item-label">Backup Servers</span>
              <span class="m-list-settings__item-control">
                <span class="m-switch m-switch--outline m-switch--icon-check m-switch--brand">
                  <label>
                    <input type="checkbox" checked="checked" name="">
                    <span></span>
                  </label>
                </span>
              </span>
            </div>
            <div class="m-list-settings__item">
              <span class="m-list-settings__item-label">Audit Logs</span>
              <span class="m-list-settings__item-control">
                <span class="m-switch m-switch--outline m-switch--icon-check m-switch--brand">
                  <label>
                    <input type="checkbox" name="">
                    <span></span>
                  </label>
                </span>
              </span>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
  var mQuickSidebar = function () {
    var topbarAside = $('#m_quick_sidebar');
    var topbarAsideTabs = $('#m_quick_sidebar_tabs');
    var topbarAsideContent = topbarAside.find('.m-quick-sidebar__content');

    var initMessages = function () {
      var messages = mUtil.find(mUtil.get('m_quick_sidebar_tabs_messenger'), '.m-messenger__messages');
      var form = $('#m_quick_sidebar_tabs_messenger .m-messenger__form');

      mUtil.scrollerInit(messages, {
        disableForMobile: true,
        resetHeightOnDestroy: false,
        handleWindowResize: true,
        height: function () {
          var height = topbarAside.outerHeight(true) -
            topbarAsideTabs.outerHeight(true) -
            form.outerHeight(true) - 120;

          return height;
        }
      });
    }

    var initSettings = function () {
      var settings = mUtil.find(mUtil.get('m_quick_sidebar_tabs_settings'), '.m-list-settings');

      if (!settings) {
        return;
      }

      mUtil.scrollerInit(settings, {
        disableForMobile: true,
        resetHeightOnDestroy: false,
        handleWindowResize: true,
        height: function () {
          return mUtil.getViewPort().height - topbarAsideTabs.outerHeight(true) - 60;
        }
      });
    }

    var initLogs = function () {
      var logs = mUtil.find(mUtil.get('m_quick_sidebar_tabs_logs'), '.m-list-timeline');

      if (!logs) {
        return;
      }

      mUtil.scrollerInit(logs, {
        disableForMobile: true,
        resetHeightOnDestroy: false,
        handleWindowResize: true,
        height: function () {
          return mUtil.getViewPort().height - topbarAsideTabs.outerHeight(true) - 60;
        }
      });
    }

    var initOffcanvasTabs = function () {
      initMessages();
      initSettings();
      initLogs();
    }

    var initOffcanvas = function () {
      var topbarAsideObj = new mOffcanvas('m_quick_sidebar', {
        overlay: true,
        baseClass: 'm-quick-sidebar',
        closeBy: 'm_quick_sidebar_close',
        toggleBy: 'm_quick_sidebar_toggle'
      });

      // run once on first time dropdown shown
      topbarAsideObj.one('afterShow', function () {
        mApp.block(topbarAside);

        setTimeout(function () {
          mApp.unblock(topbarAside);

          topbarAsideContent.removeClass('m--hide');

          initOffcanvasTabs();
        }, 1000);
      });
    }

    return {
      init: function () {
        if (topbarAside.length === 0) {
          return;
        }

        initOffcanvas();
      }
    };
  }();

  $(document).ready(function () {
    mQuickSidebar.init();
  });

</script>
