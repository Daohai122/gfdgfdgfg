<div class="m-content">
	<div class="row">
		<div class="col-md-12">
			<form validation-form submit-function="editBatches()" class="m-form m-form--fit m-form--label-align-right">
				<div class="col-md-12" style="padding:0px">
					<div class="m-portlet m-portlet--tab">
						<div class="m-portlet__body">
							<div class="form-body col-lg-12" style="margin-top: 20px">
								<div class="form-group m-form__group row">
									<div class="col-md-6">
										<div class=" row">
											<label class="col-4 col-form-label">{{'Mã khóa học' | translate}}<span class="required"> *</span></label>
											<div class="col-8">
												<input type="text" ng-model="dataBatches.code" maxlength="50" class="form-control m-input" placeholder="Nhập mã khóa học" required>
											</div>
										</div>
									</div>
									<div class="col-md-6">
										<div class=" row">
											<label class="col-4 col-form-label">{{'Trung tâm' | translate}}<span class="required"> *</span></label>
											<div class="col-8">
												<!-- <select ng-model="dataBatches.center_code" get-data="getCenter()" value-key="code" text-key="name" si-select class="form-control" required>
												</select> -->
												<select class="form-control" si-selectpicker update="dataCenter" title="Chọn trung tâm" ng-model="dataBatches.center_code" required>

													<option ng-repeat="data in dataCenter" value="{{data.code}}">{{data.name}}</option>
												</select>
											</div>
										</div>
									</div>
								</div>
								<div class="m-form__group row">
									<div class="col-md-6">  
										<div class="form-group row">
											<label class="col-4 col-form-label">{{'Thời gian bắt đầu tuyển sinh' | translate}}:</label>
											<div class="col-8">
												<input type="text" ng-model="dataBatches.start_time" class="form-control" placeholder="Nhập thời gian tuyển sinh">
											</div>
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group row">
											<label class="col-4 col-form-label">{{'Mức lương chuẩn' | translate}} <span class="required"> *</span></label>
											<div class="col-8">
												<input type="text" pattern="[0-9,]*" ng-model="dataBatches.standard_salary" class="form-control" placeholder="Nhập mức lương chuẩn"  format="currency" required>
											</div>
										</div>
									</div>
								</div>
								<div class=" m-form__group row">
									<div class="col-md-6">  
										<div class="form-group row">
											<label class="col-4 col-form-label">{{'Mức lương trần' | translate}} <span class="required"> *</span></label>
											<div class="col-8">
												<input type="text" pattern="[0-9,]*" ng-model="dataBatches.ceil_salary" class="form-control" placeholder="Nhập mức lương trần" format="currency" required>
											</div>
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group row">
											<label class="col-4 col-form-label">{{'Người phụ trách' | translate}} <span class="required"> *</span></label>
											<div class="col-8">
												<input type="text"  maxlength="255" ng-model="dataBatches.authorised_person" class="form-control" placeholder="Nhập họ tên người phụ trách" required>
											</div>
										</div>
									</div>
								</div>
								<div class="form-group m-form__group row">
									<div class="col-md-6">
										<div class=" row">
											<label class="col-4 col-form-label">{{'Mục tiêu tuyển sinh' | translate}}:</label>
											<div class="col-8">
												<input type="text" maxlength="255" class="form-control" ng-model="dataBatches.goal" placeholder="Nhập mục tiêu tuyển sinh">
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="m-portlet__foot m-portlet__foot--fit m-portlet__no-border">
								<div class="m-form__actions m-form__actions">
									<div class="row">
										<div class="col-lg-7 ml-lg-auto">
											<button type="reset" ng-click="goToList()" class="btn btn-secondary">{{'Quay lại' | translate}}</button>
											<button button-submit  type="submit" class="btn btn-accent">{{'Lưu' | translate}}</button>
										</div>
									</div>
								</div>
							</div>
							<div class="m-accordion m-accordion--bordered" role="tablist" id= "m_accordion_6">
								<div class="m-accordion__item">
									<div class="m-accordion__item-head" role="tab" id="m_accordion_6_item_2_head" data-toggle="collapse" href="#m_accordion_6_item_2_body" aria-expanded="false">
										<span class="m-accordion__item-title">{{'Danh sách lớp học' | translate}}</span>

										<span class="m-accordion__item-mode"></span>     
									</div>

									<div class="m-accordion__item-body collapse show" id="m_accordion_6_item_2_body" role="tabpanel" aria-labelledby="m_accordion_6_item_2_head" data-parent="#m_accordion_6" style=""> 
										<div class="m-accordion__item-content no-padding" >
											<div class="m-portlet__body">
												<button type="button" class="btn btn-accent" ng-click="openModalAddClass()">{{'Thêm' | translate}}</button>
												<table ng-if="dataClass" class="table  table-striped table-bordered table-hover table-checkable dataTable no-footer" role="grid">
													<thead>
														<tr role='row'>
															<th style="width: 15%">{{'Lớp' | translate }}</th>
															<th style="width: 15%">{{'Thời gian (Tháng)' | translate }}</th>
															<th style="width: 15%">{{'Theo dõi (Tháng)' | translate }}</th>
															<th style="width: 20%">{{'Từ' | translate }}</th>
															<th style="width: 20%">{{'Đến' | translate }}</th>
															<th style="width: 15%">{{'Hành động' | translate }}</th>
														</tr>
													</thead>
													<tbody>
														<tr ng-repeat ="data in dataClass track by $index">
															<td class="text-center">{{data.name}}</td>
															<td>{{data.month}}</td>
															<td>{{data.follow_month}} </td>
															<td><input type="text" class="form-control" date-picker ng-model="dataClass[$index].from_date" placeholder="Chọn ngày bắt đầu"></td>
															<td><input type="text" class="form-control" date-picker update="dataClass[$index].from_date" start-date="true" ng-model="dataClass[$index].to_date" placeholder="Chọn ngày kết thúc"></td>
															<td class="text-center">
																<a href="javarscipt:;" ng-click="quickUpdateClass($index)" class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" data-toggle="m-tooltip"  title="" data-original-title="Update"><i class="fa fa-check"></i></a>
																<a href="javarscipt:;" ng-click="updateModal($index)" class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" data-toggle="m-tooltip"  title="" data-original-title="Sửa"><i class="la la-edit"></i></a>
																<a href="javascript:;" ng-click="deleteClass($index)" class="m-portlet__nav-link btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill" data-toggle="m-tooltip"  title="" data-original-title="Xóa"><i class="flaticon-delete"></i></a>
															</td>
														</tr>
													</tbody>
												</table>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</form>

		</div>
	</div>
</div>
</div>

<div class="modal fade" id="classModal" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog"  style="width: 95%; max-width: 95%;">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" ng-if="formMode == 'create'">{{'Thêm lớp học' | translate}}</h5>
				<h5 class="modal-title" ng-if="formMode == 'update'">{{'Sửa lớp học' | translate}}</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<form validation-form submit-function="submitForm()" class="m-form m-form--fit m-form--label-align-right">
					<div class="form-body col-lg-12 row" style="margin-top: 20px">
						<div class="col-md-6">
							<div class=" form-group row">
								<label class="col-4 col-form-label">{{'Ngành học:' | translate }} <span class="required"> *</span></label>
								<div class="col-8">
									<select class="form-control" ng-change="changeNganh()" update="dataStudyField" si-selectpicker ng-model="dataNewClass.field_id" title="Chọn ngành học" required>
										<option value="">Chọn ngành học</option>
										<option ng-repeat="studyField in dataStudyField" value="{{studyField.id}}">{{studyField.code}}</option>
									</select>
								</div>
							</div>
							
							<div class=" form-group row">
								<label class="col-4 col-form-label">{{'Ngày bắt đầu:' | translate }} <span class="required"> *</span></label>
								<div class="col-8">
									<input type="text" date-picker future-date="now" class="form-control" ng-model="dataNewClass.from_date" required autocomplete="off">
								</div>
							</div>
							<div class=" form-group row">
								<label class="col-4 col-form-label">{{'Ngày kết thúc:' | translate }} <span class="required"> *</span></label>
								<div class="col-8">
									<input type="text" date-picker update="dataNewClass.from_date" start-date="true" class="form-control" ng-model="dataNewClass.to_date" required autocomplete="off">
								</div>
							</div>
							<div class=" form-group row">
								<label class="col-4 col-form-label">{{'Giáo viên:' | translate }}</label>
								<div class="col-8">
									<select class="form-control" update="dataTeacher" multiple si-selectpicker title="Chọn giáo viên" ng-model="dataNewClass.teachers" id="" >
										<option ng-repeat="item in dataTeacher" value="{{item.id}}">{{item.name}}</option>
									</select>
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group row">
								<label class="col-4 col-form-label">{{'Mã lớp học' | translate }} <span class="required"> *</span></label>
								<div class="col-8">
									<input type="text" ng-model="dataNewClass.code" maxlength="100" class="form-control m-input" placeholder="Nhập mã lớp học" readonly disabled required>
								</div>
							</div>
							<div class=" form-group row">
								<label class="col-4 col-form-label">{{'Thời gian lớp học(Tháng):' | translate }} <span class="required"> *</span></label>
								<div class="col-8">
									<input type="number" min="1" max="6" class="form-control" ng-model="dataNewClass.month" required>
								</div>
							</div>
							<div class=" form-group row">
								<label class="col-4 col-form-label">{{'Thời gian theo dõi(Tháng):' | translate }} <span class="required"> *</span></label>
								<div class="col-8">
									<input type="text" min="1" max="12" class="form-control" ng-model="dataNewClass.follow_month" required>
								</div>
							</div>
							
						</div>
					</div>
					<div class="row">
						<div class="col-lg-7 ml-lg-auto">
							<button type="reset" button-reset class="btn btn-secondary" data-dismiss="modal">{{'Quay lại' | translate}}</button>
							<button button-submit  type="submit" class="btn btn-accent">{{'Lưu' | translate}}</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>